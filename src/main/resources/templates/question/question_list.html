<html layout:decorate="~{layout}">
<div layout:fragment="content" class="container my-3" th:if="${paging != null}">
  <h2>질문 리스트</h2>
  <table class="table">
    <thead class="table-dark">
      <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성일시</th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="q, loop : ${paging}">
        <td th:text="${paging.totalElements - loop.index}"></td>
        <td>
          <a th:href="@{|/question/detail/${q.id}|}" th:text="${q.subject}"></a>
        </td>
        <td th:text="${#temporals.format(q.createDate, 'yyyy-MM-dd HH:mm')}"></td>
      </tr>
    </tbody>
  </table>
  
  <nav th:if="${!paging.isEmpty()}">
    <ul class="pagination justify-content-center">
      <li class="page-item" th:classappend="${!paging.hasPrevious} ? 'disabled'">
        <a class="page-link" th:href="@{|?page=${paging.number-1}|}">이전</a>
      </li>
      <li class="page-item"
          th:each="page : ${#numbers.sequence(0, paging.totalPages-1)}"
          th:if="${page >= paging.number-5 and page <= paging.number+5}"
          th:classappend="${page == paging.number} ? 'active'">
        <a class="page-link" th:href="@{|/question/list?page=${page}|}" th:text="${page + 1}"></a>
      </li>
      <li class="page-item" th:classappend="${!paging.hasNext} ? 'disabled'">
        <a class="page-link" th:href="@{|?page=${paging.number+1}|}">다음</a>
      </li>
    </ul>
  </nav>
  
  <a th:href="@{/question/create}" class="btn btn-primary">질문 등록하기</a>
</div>
</html>